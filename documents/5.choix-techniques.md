# Choix techniques

## Architecture : récupération des données WordPress en amont

Dans ce projet, **les données WordPress sont récupérées avant le `dev` et le `build`** via un script dédié (CLI). Autrement dit, Gatsby ne dépend pas d’un appel en direct à l’API WordPress au moment du build : il ne fait que consommer des données déjà présentes en local (fichiers JSON).

### Pourquoi ce choix ?

- **Contrôle explicite de la synchronisation avec WordPress**  
  Le développeur choisit **quand** synchroniser les contenus : il peut lancer la commande de fetch à la demande (par exemple avant de démarrer `gatsby develop`, ou ponctuellement pendant la journée) sans relancer tout le build.

- **Prise en compte immédiate des nouveaux contenus**  
  Si de nouveaux articles ou pages sont publiés sur WordPress, il suffit de **relancer la commande de fetch** : les fichiers locaux sont mis à jour et le site reflète ces nouveautés **instantanément**, sans nécessiter un nouveau build complet.

- **Résilience face aux pannes de WordPress**
  - En **CI/CD**, si WordPress est indisponible, on peut faire **échouer le pipeline** au moment du fetch (ce qui est souhaitable, car on ne veut pas déployer un site avec des données incomplètes ou obsolètes).
  - En **développement local**, on peut **continuer à travailler même si WordPress est down**, puisqu’on dispose déjà de données locales (les derniers JSON récupérés). Le développeur peut coder, tester le front, ajuster les templates, etc., sans dépendre de la disponibilité de l’API distante.

Ce découplage entre **récupération des données** et **build Gatsby** apporte donc :

- **plus de contrôle** (sync manuelle, à la demande),
- **plus de rapidité** (pas de fetch systématique à chaque build),
- **plus de robustesse** (dev possible même en cas de panne WordPress, CI/CD explicite sur les erreurs de fetch).
